<%# frozen_string_literal: true %>
<% content_for(:page_title, ranking_title) %>

<% content_for(:head) do %>
  <%= preload_link_tag image_path('burst-fail') %>
  <%= stylesheet_link_tag 'ranking' %>
<% end %>

<aside class="Burst Burst--fail">
  <h1 class="Burst-text">Sup?</h1>
</aside>

<nav class="SubHeader">
  <ul class="Navigation">
    <li class="SubHeader-rankingNavItem Navigation-item">
      <%= link_to 'World', characters_path('world'), rel: 'index' %>
    </li>

    <% unless world_page? %>
      <li class="SubHeader-rankingNavItem Navigation-item">
        <%= link_to region, characters_path(*server_parts.first), rel: ('up' if realm) %>
      </li>
    <% end %>

    <% if realm %>
      <li class="SubHeader-rankingNavItem Navigation-item">
        <%= link_to realm, characters_path(*server_parts) %>
      </li>
    <% end %>
  </ul>

  <ul class="Navigation">
    <% unless @ranking.first_page? %>
      <li class="Navigation-item">
        <%= link_to t('page.prev'), prev_ranking_path(@ranking.prev_cursor), rel: 'prev' %>
      </li>
    <% end %>

    <% unless @ranking.last_page? %>
      <li class="Navigation-item">
        <%= link_to t('page.next'), next_ranking_path(@ranking.next_cursor), rel: 'next' %>
      </li>
    <% end %>
  </ul>
</nav>

<table class="Leaderboard">
  <colgroup>
    <col span="1" class="Leaderboard-column">
    <col span="1" class="Leaderboard-column">
    <col span="1" class="Leaderboard-column">
    <col span="1" class="Leaderboard-column">
    <col span="1" class="Leaderboard-column">
  </colgroup>

  <thead>
    <th class="Leaderboard-cell">#</th>

    <th class="Leaderboard-cell">
      <span class="u-visuallyHidden">Class</span>
    </th>

    <th class="Leaderboard-cell">Name</th>

    <th class="Leaderboard-cell" <%= tid :extra_column_name %>>
      <%= @ranking.extra_column_name %>
    </th>

    <th class="Leaderboard-cell">Score</th>
  </thead>

  <tbody><%= render partial: 'character_row', collection: @ranking, as: :character %></tbody>
</table>
